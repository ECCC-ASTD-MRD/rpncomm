cmake_minimum_required(VERSION 3.16)

file(GLOB PROJECT_INCLUDE_FILES RPN_COMM*.h RPN_COMM*.inc)
file(GLOB PROJECT_C_FILES RPN_COMM*.c)
file(GLOB PROJECT_F_FILES RPN_COMM*.F90 )

message(STATUS "RPN_COMM_VERSION_STRING = ${RPN_COMM_VERSION_STRING}")
message(STATUS "RPN_COMM_VERSION_MARKER = ${RPN_COMM_VERSION_MARKER}")

add_library(${PROJECT_NAME} ${PROJECT_INCLUDE_FILES} ${PROJECT_C_FILES} ${PROJECT_F_FILES})

configure_file(RPN_COMM_version.F90.in ${CMAKE_CURRENT_SOURCE_DIR}/RPN_COMM_version.F90 @ONLY)
target_compile_definitions(${PROJECT_NAME} PUBLIC MARKER=RPN_COMM_marker_${RPN_COMM_VERSION_MARKER})

include(gen_test_target)
gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_000.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_001.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_002.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_003.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_004.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_005.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_006.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_007.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_008.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_009.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_010.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_011.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_012.F90)
# gen_test_target(GENERATE_F_PROGRAM rpn_comm INPUT_FILES TEST_013.F90)
